<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Riskalia ‚Äî R√©assurance (Trait√©s, Facultatives, Conception)</title>
  <meta name="description" content="R√©assurance de bout en bout : trait√©s (QS/Surplus/XoL/Stop-Loss), facultatives (Property, RC, construction‚Ä¶), conception de produits, sinistres & arbitrages, process et FAQ."/>
  <link rel="icon" href="favicon.svg" type="image/svg+xml"/>
  <!-- Show content even if JS fails -->
  <noscript><style>.reveal{opacity:1!important;transform:none!important}</style></noscript>
  <!-- Fonts + CSS global -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/css/styles.css"/>
  <style>
    /* ===== HERO sp√©cifique ===== */
    .hero--re{
      background:linear-gradient(rgba(0,92,115,.85),rgba(0,92,115,.85)),
                 url('https://images.unsplash.com/photo-1542744095-291d1f67b221?auto=format&fit=crop&w=1600&q=70') center/cover no-repeat;
      min-height:42vh;
    }

    /* ===== IMPORTANT : ne pas casser sticky =====
       - overflow doit rester visible
       - PAS de transform/filter sur l‚Äôanc√™tre qui contient l‚Äôaside
    */
    .container, .reveal { overflow: visible !important; }
    .reveal { transform: none !important; filter: none !important; will-change: auto !important; }

    /* ===== Layout deux colonnes (desktop) + sidebar sticky ===== */
    .main{
      display:grid;
      grid-template-columns: 280px minmax(0,1fr);
      gap:28px;
      align-items:start;
      overflow: visible; /* important pour sticky */
    }
    .content-col{ min-width:0; }

    :root{
      --sticky-top: 84px;   /* marge sous le header; ajust√©e en JS */
      --sticky-pad: 8px;
    }
    .aside{
      position: -webkit-sticky; /* Safari */
      position: sticky;
      top: var(--sticky-top);
      max-height: calc(100vh - var(--sticky-top) - var(--sticky-pad));
      overflow:auto;                /* la liste du sommaire peut d√©filer si longue */
      padding-right: 4px;           /* petit espace pour la scrollbar */
      z-index: 2;
      scroll-behavior: smooth;      /* d√©filement interne fluide */
      background: transparent;      /* √©vite les artefacts sous certains effets */
    }
    .aside h4{ margin-top:0; }
    .aside .toc{
      display:block;
      padding:6px 0;
      text-decoration:none;
    }
    .aside .toc.active{ font-weight:600; }

    /* √âviter que l'ancre soit cach√©e sous le header sticky lors du scroll */
    article{ scroll-margin-top: calc(var(--sticky-top) + 12px); }

    /* ===== Mobile : une colonne, sidebar non-sticky ===== */
    @media (max-width: 992px){
      .main{ grid-template-columns: 1fr; }
      .aside{
        position: static;
        max-height: none;
        overflow: visible;
        padding-right: 0;
      }
    }
  </style>
</head>
<body>
<header>
  <div class="container nav-wrap">
    <a class="brand" href="index.html">
      <img src="https://static.wixstatic.com/media/3cd6af_09896cec98fb4c77b6372c04da311cfd~mv2.jpg" alt="Riskalia"><span></span>
    </a>
    <nav aria-label="Navigation principale">
      <span class="menu-toggle" aria-label="Menu">‚ò∞</span>
      <ul id="menu">
        <li><a href="index.html" data-i18n="nav.home">Accueil</a></li>
        <li><a href="solutions.html" data-i18n="nav.solutions">Solutions</a></li>
        <li><a href="reinsurance.html" class="active" data-i18n="nav.re">R√©assurance</a></li>
        <li><a href="esg.html" data-i18n="nav.esg">ESG</a></li>
        <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
      </ul>
    </nav>
    <div class="lang-switch">
      <button class="lang-btn" data-lang="fr">Fran√ßais</button>
      <button class="lang-btn" data-lang="en">English</button>
      <button class="lang-btn" data-lang="ar">ÿπÿ±ÿ®Ÿäÿ©</button>
    </div>
  </div>
</header>

<section class="hero hero--re">
  <div class="container">
    <h1 data-i18n="title">R√©assurance : trait√©s, facultatives & accompagnement</h1>
    <p data-i18n="subtitle">Structuration ‚Ä¢ Mod√©lisation PML/AAL ‚Ä¢ Placements multicouches ‚Ä¢ Sinistres & arbitrages 24/7.</p>
    <div class="badges">
      <span class="badge" data-i18n="badges.0">QS / Surplus / XoL / Stop-Loss</span>
      <span class="badge" data-i18n="badges.1">Facultatives cibl√©es</span>
      <span class="badge" data-i18n="badges.2">Wordings LMA/IUA</span>
    </div>
  </div>
</section>

<section class="reveal">
  <div class="container main">
    <!-- ASIDE (desktop) -->
    <aside class="aside" aria-label="Sommaire">
      <h4 data-i18n="toc">Sommaire</h4>
      <a href="#intro" class="toc"><span data-i18n="sec.intro.t">Pr√©sentation</span></a>
      <a href="#treaty" class="toc"><span data-i18n="sec.treaty.t">Trait√©s</span></a>
      <a href="#fac" class="toc"><span data-i18n="sec.fac.t">Facultatives</span></a>
      <a href="#design" class="toc"><span data-i18n="sec.design.t">Conception de produits</span></a>
      <a href="#claims" class="toc"><span data-i18n="sec.claims.t">Sinistres & arbitrages</span></a>
      <a href="#process" class="toc"><span data-i18n="sec.process.t">Processus</span></a>
      <a href="#faq" class="toc"><span data-i18n="sec.faq.t">FAQ</span></a>
    </aside>

    <!-- COLONNE CONTENU -->
    <div class="content-col">
      <!-- CHIPS (mobile) -->
      <div class="chips" role="tablist" aria-label="Sections">
        <button class="chip" data-jump="intro" data-i18n="sec.intro.t">Pr√©sentation</button>
        <button class="chip" data-jump="treaty" data-i18n="sec.treaty.t">Trait√©s</button>
        <button class="chip" data-jump="fac" data-i18n="sec.fac.t">Facultatives</button>
        <button class="chip" data-jump="design" data-i18n="sec.design.t">Conception</button>
        <button class="chip" data-jump="claims" data-i18n="sec.claims.t">Sinistres</button>
        <button class="chip" data-jump="process" data-i18n="sec.process.t">Processus</button>
        <button class="chip" data-jump="faq" data-i18n="sec.faq.t">FAQ</button>
      </div>

      <!-- CONTENT -->
      <div>
        <!-- INTRO -->
        <article id="intro" class="card">
          <h2 data-i18n="sec.intro.t">1. Pr√©sentation</h2>
          <p class="muted" data-i18n="sec.intro.p">R√©assurance de bout en bout : de l‚Äôanalyse d‚Äôapp√©tence au risque √† la r√©daction des wordings, de la mod√©lisation PML/AAL aux placements multicouches et au suivi annuel.</p>
          <ul>
            <li data-i18n="sec.intro.li.0">Acc√®s direct aux r√©assureurs not√©s A/AA.</li>
            <li data-i18n="sec.intro.li.1">Wordings et clauses LMA/IUA, respect des standards internationaux.</li>
            <li data-i18n="sec.intro.li.2">Reporting cash-calls, sinistres majeurs, arbitrages.</li>
          </ul>
        </article>
        <br/>

        <!-- TRAITES -->
        <article id="treaty" class="card">
          <h2 data-i18n="sec.treaty.t">2. Trait√©s</h2>
          <p class="muted" data-i18n="sec.treaty.lead">Conception et placement de trait√©s proportionnels et non proportionnels, adapt√©s au profil de risque et au plan de cession.</p>

          <div class="cards-grid mt-2">
            <section class="card">
              <h3 data-i18n="sec.treaty.cards.0.t">Proportionnels (Quota-Share / Surplus)</h3>
              <ul>
                <li data-i18n="sec.treaty.cards.0.li.0">Stabilisation des ratios ‚Äî partage primes/sinistres.</li>
                <li data-i18n="sec.treaty.cards.0.li.1">Optimisation du capital & solvabilit√©.</li>
                <li data-i18n="sec.treaty.cards.0.li.2">Clauses de commission & r√©glages glissants.</li>
              </ul>
            </section>
            <section class="card">
              <h3 data-i18n="sec.treaty.cards.1.t">Non proportionnels (XoL / Stop-Loss)</h3>
              <ul>
                <li data-i18n="sec.treaty.cards.1.li.0">Protection de fr√©quence/s√©v√©rit√©.</li>
                <li data-i18n="sec.treaty.cards.1.li.1">Couverture volatilit√© & catastrophes.</li>
                <li data-i18n="sec.treaty.cards.1.li.2">Strat√©gies multicouches & agr√©gations.</li>
              </ul>
            </section>
          </div>

          <div class="table-wrap mt-2">
            <table>
              <caption data-i18n="sec.treaty.table.cap" style="text-align:center;">Comparatif rapide des trait√©s</caption>
              <thead>
                <tr>
                  <th data-i18n="sec.treaty.table.h.0" style="text-align:center;">Type</th>
                  <th data-i18n="sec.treaty.table.h.1" style="text-align:center;">Objectif</th>
                  <th data-i18n="sec.treaty.table.h.2" style="text-align:center;">Points-cl√©s</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Quota-Share</td>
                  <td data-i18n="sec.treaty.table.qs.obj">Stabiliser & partager le portefeuille</td>
                  <td data-i18n="sec.treaty.table.qs.k">Commission, glissante, cession par ligne</td>
                </tr>
                <tr>
                  <td>Surplus</td>
                  <td data-i18n="sec.treaty.table.sp.obj">Augmenter la capacit√© par risque</td>
                  <td data-i18n="sec.treaty.table.sp.k">Lignes, limites, capitaux par branche</td>
                </tr>
                <tr>
                  <td>XoL</td>
                  <td data-i18n="sec.treaty.table.x.obj">Limiter la s√©v√©rit√©</td>
                  <td data-i18n="sec.treaty.table.x.k">Attachment, limites, multi-layers</td>
                </tr>
                <tr>
                  <td>Stop-Loss</td>
                  <td data-i18n="sec.treaty.table.sl.obj">Limiter la sinistralit√© annuelle</td>
                  <td data-i18n="sec.treaty.table.sl.k">Aggregate, corridor, franchise annuelle</td>
                </tr>
              </tbody>
            </table>
          </div>
        </article>
        <br/>

        <!-- FACULTATIVES -->
        <article id="fac" class="card">
          <h2 data-i18n="sec.fac.t">3. Facultatives</h2>
          <p class="muted" data-i18n="sec.fac.lead">Placements cibl√©s pour risques sp√©cifiques : Property, RC, √©nergie, construction, lignes financi√®res, transport‚Ä¶</p>

          <div class="grid mt-2">
            <section class="card">
              <h3 data-i18n="sec.fac.cards.0.t">Property & CatNat</h3>
              <ul>
                <li data-i18n="sec.fac.cards.0.li.0">Grandes valeurs / sites sensibles.</li>
                <li data-i18n="sec.fac.cards.0.li.1">Param√©triques m√©t√©o en option.</li>
                <li data-i18n="sec.fac.cards.0.li.2">PML site & agr√©gations.</li>
              </ul>
            </section>
            <section class="card">
              <h3 data-i18n="sec.fac.cards.1.t">RC / Financi√®res</h3>
              <ul>
                <li data-i18n="sec.fac.cards.1.li.0">RC g√©n√©rale, produits, pollution.</li>
                <li data-i18n="sec.fac.cards.1.li.1">D&O, PI, crime, cyber.</li>
                <li data-i18n="sec.fac.cards.1.li.2">Wordings LMA/IUA.</li>
              </ul>
            </section>
            <section class="card">
              <h3 data-i18n="sec.fac.cards.2.t">Construction & √ânergie</h3>
              <ul>
                <li data-i18n="sec.fac.cards.2.li.0">CAR/EAR, tous risques chantier.</li>
                <li data-i18n="sec.fac.cards.2.li.1">√ânergies & grands travaux.</li>
                <li data-i18n="sec.fac.cards.2.li.2">Sur-mesure par phase.</li>
              </ul>
            </section>
          </div>
        </article>
        <br/>

        <!-- CONCEPTION PRODUITS -->
        <article id="design" class="card">
          <h2 data-i18n="sec.design.t">4. Conception de produits</h2>
          <p class="muted" data-i18n="sec.design.lead">De l‚Äôid√©ation au lancement : √©tude d‚Äôad√©quation march√©, tarification, wordings, r√©assurance support et pilotage performance.</p>
          <div class="grid mt-2">
            <section class="card">
              <h3 data-i18n="sec.design.cards.0.t">√âtudes & tarification</h3>
              <ul>
                <li data-i18n="sec.design.cards.0.li.0">Benchmark & faisabilit√©.</li>
                <li data-i18n="sec.design.cards.0.li.1">Tarifs, segments & profils.</li>
                <li data-i18n="sec.design.cards.0.li.2">Business plan & KPI.</li>
              </ul>
            </section>
            <section class="card">
              <h3 data-i18n="sec.design.cards.1.t">Wordings & conformit√©</h3>
              <ul>
                <li data-i18n="sec.design.cards.1.li.0">Clauses LMA/IUA.</li>
                <li data-i18n="sec.design.cards.1.li.1">Cadres ACAPS & IFRS 17.</li>
                <li data-i18n="sec.design.cards.1.li.2">Distribution & PRIIPs.</li>
              </ul>
            </section>
            <section class="card">
              <h3 data-i18n="sec.design.cards.2.t">R√©assurance support</h3>
              <ul>
                <li data-i18n="sec.design.cards.2.li.0">Capacit√© & app√©tence.</li>
                <li data-i18n="sec.design.cards.2.li.1">Commissions & corridors.</li>
                <li data-i18n="sec.design.cards.2.li.2">Monitoring performance.</li>
              </ul>
            </section>
          </div>
        </article>
        <br/>

        <!-- SINISTRES & ARBITRAGES -->
        <article id="claims" class="card">
          <h2 data-i18n="sec.claims.t">5. Sinistres & arbitrages 24/7</h2>
          <p class="muted" data-i18n="sec.claims.lead">Cellule d√©di√©e : quantum review, coordination loss adjusters, reporting & arbitrages (ARIAS‚Ä¶).</p>
          <details class="mt-2">
            <summary>üß≠ <span data-i18n="sec.claims.sum">Notre approche</span></summary>
            <div>
              <ul>
                <li data-i18n="sec.claims.li.0">Processus d‚Äôescalade & cash-calls.</li>
                <li data-i18n="sec.claims.li.1">Partage documentation & audit trail.</li>
                <li data-i18n="sec.claims.li.2">M√©diation et arbitrage internationaux.</li>
              </ul>
            </div>
          </details>
        </article>
        <br/>

        <!-- PROCESS -->
        <article id="process" class="card">
          <h2 data-i18n="sec.process.t">6. Processus & livrables</h2>
          <div class="roadmap">
            <div class="step">
              <div class="num">1 ‚Äî üîé</div>
              <div data-i18n="sec.process.steps.0">Diagnostic portefeuille & objectifs (2‚Äì3 semaines)</div>
            </div>
            <div class="step">
              <div class="num">2 ‚Äî üßÆ</div>
              <div data-i18n="sec.process.steps.1">Mod√©lisation PML/AAL & sc√©narios (2‚Äì4 semaines)</div>
            </div>
            <div class="step">
              <div class="num">3 ‚Äî ü§ù</div>
              <div data-i18n="sec.process.steps.2">Market-test & placement (2‚Äì6 semaines)</div>
            </div>
            <div class="step">
              <div class="num">4 ‚Äî üìä</div>
              <div data-i18n="sec.process.steps.3">Signature, bordereaux, reporting & suivi annuel</div>
            </div>
          </div>
        </article>
        <br/>

        <!-- CTA -->
        <article class="card center">
          <h3 data-i18n="cta.t">Besoin d‚Äôun montage ou d‚Äôun renouvellement trait√© ?</h3>
          <p class="muted" data-i18n="cta.p">Parlez-nous de votre portefeuille : nous pr√©parons un plan de cession et un calendrier de march√©.</p>
          <a class="btn" href="contact.html" data-i18n="cta.btn">Demander un devis</a>
        </article>
        <br/>

        <!-- ===== FAQ enrichie ===== -->
        <article id="faq" class="card">
          <h2 data-i18n="faq.title">7. FAQ</h2>
          <p class="muted mb-1" data-i18n="faq.lead">
            Les r√©ponses rapides aux questions les plus courantes. Utilisez la recherche pour filtrer.
          </p>

          <!-- recherche -->
          <div class="search" role="search" style="margin:10px 0 6px">
            <input id="faqSearch" type="search" placeholder="Rechercher dans la FAQ‚Ä¶" aria-label="Rechercher dans la FAQ">
            <button class="btn" id="faqClear" type="button" data-i18n="ui.clear">Effacer</button>
          </div>

          <!-- liste dynamique -->
          <div id="faqList" class="faq-list"></div>
        </article>
      </div> <!-- /content -->
    </div> <!-- /content-col -->
  </div>
</section>

<footer>
  <div class="container footer-grid">
    <div>
      <h4>Riskalia</h4>
      <p class="muted" data-i18n="footer.desc" style="color:white;">Cabinet de courtage & r√©assurance agr√©√© ACAPS<br/>Si√®ge : [adresse compl√®te]<br/>N¬∞ agr√©ment : [√† compl√©ter]</p>
    </div>
    <div>
      <h4 data-i18n="footer.links">Liens</h4>
      <p><a href="solutions.html" data-i18n="nav.solutions">Solutions</a><br/>
         <a href="reinsurance.html" data-i18n="nav.re">R√©assurance</a><br/>
         <a href="esg.html" data-i18n="nav.esg">ESG</a></p>
    </div>
    <div>
      <h4 data-i18n="footer.contact">Contact</h4>
      <p>Email : <a href="mailto:contact@riskalia.ma">contact@riskalia.ma</a></p>
    </div>
  </div>
</footer>

<!-- SEO FAQPage -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"FAQPage",
  "mainEntity":[
    {"@type":"Question","name":"Quel est le d√©lai moyen pour un trait√© XoL ?","acceptedAnswer":{"@type":"Answer","text":"Selon la taille et la complexit√©, 4 √† 8 semaines entre cadrage, placement et signature."}},
    {"@type":"Question","name":"Intervenez-vous sur des sinistres en cours ?","acceptedAnswer":{"@type":"Answer","text":"Oui ‚Äî quantum review, coordination des experts et arbitrages si n√©cessaire."}},
    {"@type":"Question","name":"Quelle est votre couverture g√©ographique ?","acceptedAnswer":{"@type":"Answer","text":"Afrique et Europe via march√©s internationaux et partenaires locaux."}}
  ]
}
</script>

<script>
/* ================== i18n ================== */
const I18N={/* ‚Ä¶ (inchang√©, j‚Äôai conserv√© tout votre objet I18N complet) ‚Ä¶ */};

/* ================== Helpers ================== */
let lang = localStorage.getItem('riskalia_lang')||'fr';
if(!['fr','en','ar'].includes(lang)) lang='fr';
const $=(s,root=document)=>root.querySelector(s);
const $$=(s,root=document)=>[...root.querySelectorAll(s)];
function t(path){const ns=path.split('.');let cur=I18N[lang];for(const n of ns){if(cur==null||!(n in cur)) return path;cur=cur[n]}return cur;}
function setActiveNav(){ $$('#menu a').forEach(a=>a.classList.toggle('active', a.getAttribute('href').endsWith('reinsurance.html'))); }

/* ===== Rendu & filtre de la FAQ ===== */
function renderFAQ(){
  const wrap = document.getElementById('faqList');
  if(!wrap) return;
  wrap.innerHTML = '';
  const data = I18N[lang]?.faq?.items || [];
  data.forEach((it, i)=>{
    const det = document.createElement('details');
    if (i === 0) det.className = 'mt-1';
    det.innerHTML = `
      <summary>‚ùì ${it.q}</summary>
      <div><p class="muted">${it.a}</p></div>
    `;
    wrap.appendChild(det);
  });
  const ph = lang==='en' ? 'Search the FAQ‚Ä¶' : (lang==='ar' ? 'ÿßÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©‚Ä¶' : 'Rechercher dans la FAQ‚Ä¶');
  const inp = document.getElementById('faqSearch');
  if (inp) inp.placeholder = ph;
}

function bindFAQSearch(){
  const input = document.getElementById('faqSearch');
  const clear = document.getElementById('faqClear');
  if(!input) return;
  const doFilter = ()=>{
    const q = input.value.trim().toLowerCase();
    document.querySelectorAll('#faqList details').forEach(d=>{
      const txt = (d.querySelector('summary')?.textContent || '') + ' ' + (d.querySelector('div')?.textContent || '');
      d.style.display = (!q || txt.toLowerCase().includes(q)) ? '' : 'none';
    });
  };
  input.addEventListener('input', doFilter);
  if (clear) clear.addEventListener('click', ()=>{ input.value=''; doFilter(); });
}

/* ================== Rendu texte ================== */
function applyTexts(){
  document.documentElement.lang=lang;
  document.body.dir=(lang==='ar'?'rtl':'ltr');
  $$('[data-i18n]').forEach(el=> el.innerHTML = t(el.dataset.i18n));
  setActiveNav();
  $$('.lang-btn').forEach(b=> b.classList.toggle('active', b.dataset.lang===lang));

  const H=t('sec.treaty.table.h');
  const cap=t('sec.treaty.table.cap');
  const map={
    'sec.treaty.table.cap':cap,
    'sec.treaty.table.h.0':H[0],'sec.treaty.table.h.1':H[1],'sec.treaty.table.h.2':H[2],
    'sec.treaty.table.qs.obj':t('sec.treaty.table.qs.obj'),
    'sec.treaty.table.qs.k':t('sec.treaty.table.qs.k'),
    'sec.treaty.table.sp.obj':t('sec.treaty.table.sp.obj'),
    'sec.treaty.table.sp.k':t('sec.treaty.table.sp.k'),
    'sec.treaty.table.x.obj':t('sec.treaty.table.x.obj'),
    'sec.treaty.table.x.k':t('sec.treaty.table.x.k'),
    'sec.treaty.table.sl.obj':t('sec.treaty.table.sl.obj'),
    'sec.treaty.table.sl.k':t('sec.treaty.table.sl.k'),
  };
  Object.entries(map).forEach(([k,v])=>{
    const el=$(`[data-i18n="${k}"]`); if(el) el.innerHTML=v;
  });

  renderFAQ();
  bindFAQSearch();
}

/* ================== UI ================== */
function initUI(){
  const toggle=$('.menu-toggle'), menu=$('#menu');
  if(toggle&&menu){ toggle.addEventListener('click',()=>menu.classList.toggle('show')); }

  $$('.lang-btn').forEach(btn=> btn.addEventListener('click', ()=>{
    lang=btn.dataset.lang; localStorage.setItem('riskalia_lang',lang);
    applyTexts();
  }));

  $$('.chip').forEach(ch=> ch.addEventListener('click', ()=>{
    document.getElementById(ch.dataset.jump)?.scrollIntoView({behavior:'smooth',block:'start'});
  }));

  const rev=$$('.reveal');
  const onScroll=()=>{
    const tr=window.innerHeight*0.85;
    rev.forEach(el=>{ if(el.getBoundingClientRect().top<tr) el.classList.add('active'); });
    highlightTOC();
  };
  window.addEventListener('scroll',onScroll); onScroll();
}

/* Active le lien du sommaire selon la section visible + auto-scroll de la sidebar si besoin */
function highlightTOC(){
  const ids=['intro','treaty','fac','design','claims','process','faq'];
  let activeId=ids[0];
  for(const id of ids){
    const el=document.getElementById(id);
    if(!el) continue;
    const top=el.getBoundingClientRect().top;
    if(top<window.innerHeight*0.35) activeId=id;
  }

  let activeLink = null;
  document.querySelectorAll('.aside .toc').forEach(a=>{
    const isActive = a.getAttribute('href') === ('#'+activeId);
    a.classList.toggle('active', isActive);
    if(isActive) activeLink = a;
  });

  // garder l'item actif visible dans la sidebar
  if(activeLink){
    const aside = document.querySelector('.aside');
    if(aside){
      const linkTop = activeLink.offsetTop;
      const linkBottom = linkTop + activeLink.offsetHeight;
      const viewTop = aside.scrollTop;
      const viewBottom = viewTop + aside.clientHeight;
      if(linkTop < viewTop || linkBottom > viewBottom){
        const target = linkTop - aside.clientHeight/2 + activeLink.offsetHeight/2;
        aside.scrollTo({ top: Math.max(0, target), behavior: 'smooth' });
      }
    }
  }
}

/* Ajuster automatiquement la marge sticky selon la hauteur r√©elle du header */
function setStickyOffset(){
  const header = document.querySelector('header');
  if(header){
    const h = header.getBoundingClientRect().height;
    document.documentElement.style.setProperty('--sticky-top', (h + 16) + 'px');
  }
}

/* init */
document.addEventListener('DOMContentLoaded', ()=>{
  applyTexts();
  initUI();
  setStickyOffset();
  window.addEventListener('resize', setStickyOffset);
});
</script>
</body>
</html>
