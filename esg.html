<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Riskalia â€” Solutions (Entreprises & Particuliers)</title>
  <meta name="description" content="Solutions dâ€™assurance Riskalia : offres Entreprises (multirisques, transport, flotte, RC, construction) et Particuliers (santÃ©, accidents de la vie, retraite, biens, assurance-vie & placements, voyage Schengen)."/>
  <link rel="icon" href="favicon.svg" type="image/svg+xml"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <style>
:root{--c1:#005c73;--c2:#00849b;--c3:#00b0c8;--cl:#fff;--cm:#f6fafc;--cd:#243238;--radius:16px;--shadow:0 12px 26px rgba(0,0,0,.07)}
*{box-sizing:border-box;margin:0;padding:0}
html,body{overflow-x:hidden}
body{font-family:'Open Sans',sans-serif;color:var(--cd);line-height:1.75;background:#fff}
body[dir="rtl"]{direction:rtl;font-family:'Tajawal','Open Sans',sans-serif}
h1,h2,h3,h4{font-family:'Montserrat',sans-serif;color:var(--c1)}
a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}
.container{max-width:1180px;margin:auto;padding:0 18px}
.card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
.kicker{color:#4e6a74;text-transform:uppercase;letter-spacing:.08em;font-weight:800;margin-bottom:6px}
.muted{color:#5f7781}
.badge{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:999px;background:#eef6f8;border:1px solid #cfe1e6;color:#0b4e5b;font-weight:800}
.btn{display:inline-block;padding:12px 18px;background:var(--c3);color:#fff;border-radius:12px;font-weight:800;border:1px solid transparent}
.btn:hover{background:var(--c2)}
.btn.secondary{background:#fff;color:var(--c1);border-color:#cfe1e6}
section{padding:58px 0}

/* nav */
header{position:sticky;top:0;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.06);z-index:60}
.nav-wrap{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
.brand{display:flex;align-items:center;gap:10px;color:var(--c1);font-weight:800}
.brand img{height:50px;width:auto;border-radius:10px}
nav ul{list-style:none;display:flex;gap:1rem;font-weight:700}
nav a{position:relative;padding:6px}
nav a::after{content:"";position:absolute;width:0;height:2px;background:var(--c3);left:0;bottom:-3px;transition:.25s}
nav a:hover::after,nav a.active::after{width:100%}
.menu-toggle{display:none;font-size:2rem;cursor:pointer}
.lang-switch{display:flex;gap:6px}
.lang-btn{border:1px solid #cfe1e6;border-radius:999px;padding:6px 10px;background:#eef6f8;color:#0b4e5b;font-weight:800}
.lang-btn.active,.lang-btn:hover{background:var(--c2);color:#fff;border-color:var(--c2)}
@media(max-width:900px){
  nav ul{flex-direction:column;position:absolute;top:70px;right:-100%;background:#fff;width:260px;padding:18px;box-shadow:0 6px 16px rgba(0,0,0,.08);transition:right .3s,left .3s}
  nav ul.show{right:0} body[dir="rtl"] nav ul{right:auto;left:-100%} body[dir="rtl"] nav ul.show{left:0}
  .menu-toggle{display:block}
}

/* hero */
.hero{min-height:42vh;background:linear-gradient(rgba(0,92,115,.85),rgba(0,92,115,.85)),url('https://images.unsplash.com/photo-1556740749-887f6717d7e4?auto=format&fit=crop&w=1600&q=70') center/cover no-repeat;display:flex;align-items:center;text-align:center}
.hero h1{color:#fff;font-size:clamp(2rem,3.4vw,3rem);letter-spacing:-.4px;margin-bottom:10px}
.hero p{color:#fff;opacity:.98;max-width:900px;margin:0 auto}
.badges{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:14px}

/* tabs + search */
.tabs{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:-18px}
.tab{border:1px solid #cfe1e6;background:#fff;color:#0b4e5b;padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:800}
.tab.active{background:var(--c2);color:#fff;border-color:var(--c2)}
.tools{display:flex;gap:10px;justify-content:space-between;align-items:center;margin:12px 0}
.search{flex:1;display:flex;gap:8px}
.search input{width:100%;padding:12px 14px;border:1px solid #cfe1e6;border-radius:12px}
.view{white-space:nowrap}

/* grids */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
.card h3{margin:6px 0 10px}
.card ul{padding-left:18px}
.card li{margin:8px 0}

/* reveal */
.reveal{opacity:0;transform:translateY(28px);transition:opacity .6s ease, transform .6s ease}
.reveal.active{opacity:1;transform:none}
@media(prefers-reduced-motion:reduce){*{transition:none!important;animation:none!important} .reveal{opacity:1;transform:none}}

/* footer */
footer{background:var(--c1);color:#fff;padding:50px 0;margin-top:30px}
.footer-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px}
footer h4{color:#a8ecf4;margin-bottom:10px}
  </style>
</head>
<body>
<header>
  <div class="container nav-wrap">
    <a class="brand" href="index.html">
      <img src="https://static.wixstatic.com/media/3cd6af_09896cec98fb4c77b6372c04da311cfd~mv2.jpg" alt="Riskalia"><span></span>
    </a>
    <nav aria-label="Navigation principale">
      <span class="menu-toggle" aria-label="Menu">â˜°</span>
      <ul id="menu">
        <li><a href="index.html" data-i18n="nav.home">Accueil</a></li>
        <li><a href="solutions.html" class="active" data-i18n="nav.solutions">Solutions</a></li>
        <li><a href="reinsurance.html" data-i18n="nav.re">RÃ©assurance</a></li>
        <li><a href="esg.html" data-i18n="nav.esg">ESG</a></li>
        <li><a href="contact.html" data-i18n="nav.contact">Contact</a></li>
      </ul>
    </nav>
    <div class="lang-switch">
      <button class="lang-btn" data-lang="fr">FR</button>
      <button class="lang-btn" data-lang="en">EN</button>
      <button class="lang-btn" data-lang="ar">Ø¹</button>
    </div>
  </div>
</header>

<section class="hero">
  <div class="container">
    <h1 data-i18n="title">Solutions dâ€™assurance</h1>
    <p data-i18n="subtitle">Une offre claire pour <strong>Entreprises</strong> et <strong>Particuliers</strong> â€” inspirÃ©e des meilleures pratiques du marchÃ©.</p>
    <div class="badges">
      <span class="badge" data-i18n="badges.0">Mise en concurrence des assureurs</span>
      <span class="badge" data-i18n="badges.1">Gestion des sinistres</span>
      <span class="badge" data-i18n="badges.2">Transparence des honoraires</span>
    </div>
  </div>
</section>

<section class="reveal" style="padding-top:28px">
  <div class="container">
    <div class="tabs">
      <button class="tab active" data-tab="corp" data-i18n="tabs.corp">Entreprises</button>
      <button class="tab" data-tab="retail" data-i18n="tabs.retail">Particuliers</button>
    </div>

    <div class="tools">
      <div class="search">
        <input id="q" type="search" placeholder="Rechercher un produitâ€¦" aria-label="Recherche"/>
        <button class="btn secondary" id="clear" data-i18n="clear">Effacer</button>
      </div>
      <div class="view">
        <a href="contact.html" class="btn" data-i18n="cta">Demander un devis</a>
      </div>
    </div>

    <div id="panel"></div>
  </div>
</section>

<footer>
  <div class="container footer-grid">
    <div>
      <h4>Riskalia</h4>
      <p class="muted" data-i18n="footer.desc">Cabinet de courtage & rÃ©assurance agrÃ©Ã© ACAPS<br/>SiÃ¨ge : [adresse complÃ¨te]<br/>NÂ° agrÃ©ment : [Ã  complÃ©ter]</p>
    </div>
    <div>
      <h4 data-i18n="footer.links">Liens</h4>
      <p><a href="solutions.html" data-i18n="nav.solutions">Solutions</a><br/>
         <a href="reinsurance.html" data-i18n="nav.re">RÃ©assurance</a><br/>
         <a href="esg.html" data-i18n="nav.esg">ESG</a></p>
    </div>
    <div>
      <h4 data-i18n="footer.contact">Contact</h4>
      <p>Email : <a href="mailto:contact@riskalia.ma">contact@riskalia.ma</a></p>
    </div>
  </div>
</footer>

<script>
/* ====== DonnÃ©es i18n (inspiration Ascoma pour lâ€™architecture de lâ€™offre) ====== */
const I18N={
  fr:{
    nav:{home:"Accueil",solutions:"Solutions",re:"RÃ©assurance",esg:"ESG",contact:"Contact"},
    title:"Solutions dâ€™assurance",
    subtitle:"Une offre claire pour <strong>Entreprises</strong> et <strong>Particuliers</strong> â€” inspirÃ©e des meilleures pratiques du marchÃ©.",
    badges:["Mise en concurrence des assureurs","Gestion des sinistres","Transparence des honoraires"],
    tabs:{corp:"Entreprises",retail:"Particuliers"},
    clear:"Effacer",cta:"Demander un devis",
    footer:{desc:"Cabinet de courtage & rÃ©assurance agrÃ©Ã© ACAPS<br/>SiÃ¨ge : [adresse complÃ¨te]<br/>NÂ° agrÃ©ment : [Ã  complÃ©ter]",links:"Liens",contact:"Contact"},
    corp:[
      {icon:"ğŸ­",t:"Multirisques Entreprise",bul:["BÃ¢timents, machines, stocks","Pertes dâ€™exploitation","Vol, bris, RC locative"]},
      {icon:"ğŸšš",t:"Transport (marchandises)",bul:["Tous modes : route/mer/air","Clauses ICC, facultÃ©s","Stock & transit"]},
      {icon:"ğŸš—",t:"Automobile & Flotte",bul:["Flottes & engins","RC, dommages, bris de glace","Assistance & protection juridique"]},
      {icon:"âš–ï¸",t:"ResponsabilitÃ© Civile",bul:["RC gÃ©nÃ©rale/produits","RC professionnelle","RC environnement"]},
      {icon:"ğŸ—ï¸",t:"Construction",bul:["CAR/EAR","TRC & dÃ©cennale","Tous corps de chantier"]},
      {icon:"ğŸ©º",t:"SantÃ© collective & prÃ©voyance",bul:["Couverture salariÃ©s","RÃ©seau de soins & tiers payant","Sur-mesure par conventions"]}
    ],
    retail:[
      {icon:"ğŸ©º",t:"SantÃ©",bul:["Hospitalisation & soins courants","RÃ©seaux de soins","Options famille"]},
      {icon:"ğŸ›¡ï¸",t:"Accidents de la vie",bul:["InvaliditÃ©/perte de revenus","Protection famille","Assistance 24/7"]},
      {icon:"ğŸ ",t:"Biens (Habitation)",bul:["Incendie, vol, dÃ©gÃ¢ts des eaux","ResponsabilitÃ© civile","Option objets de valeur"]},
      {icon:"ğŸ’¼",t:"Assurance-vie & placements",bul:["Ã‰pargne/valorisation","Transmission","Arbitrages sÃ©curisÃ©s"]},
      {icon:"âœˆï¸",t:"Voyage Schengen",bul:["Visa & assistance mÃ©dicale","Bagages & retard","Option multivoyages"]},
      {icon:"â³",t:"Retraite",bul:["ComplÃ©ment de revenus","Fisc optimisÃ© (selon cadre)","Gestion profilÃ©e"]}
    ]
  },
  en:{
    nav:{home:"Home",solutions:"Solutions",re:"Reinsurance",esg:"ESG",contact:"Contact"},
    title:"Insurance Solutions",
    subtitle:"A clear offer for <strong>Businesses</strong> and <strong>Individuals</strong> â€” inspired by market best practices.",
    badges:["Tendering across insurers","Claims handling","Fee transparency"],
    tabs:{corp:"Businesses",retail:"Individuals"},
    clear:"Clear",cta:"Request a quote",
    footer:{desc:"ACAPS-licensed brokerage & reinsurance<br/>Head office: [full address]<br/>Licence no.: [to be completed]",links:"Links",contact:"Contact"},
    corp:[
      {icon:"ğŸ­",t:"Commercial Property (All Risks)",bul:["Buildings, machinery, stock","Business interruption","Theft, glass, tenantsâ€™ liability"]},
      {icon:"ğŸšš",t:"Cargo/Transport",bul:["All modes: road/sea/air","ICC clauses, facultative","Stock & transit"]},
      {icon:"ğŸš—",t:"Motor & Fleet",bul:["Fleets & equipment","TPL, own damage, glass","Roadside & legal protection"]},
      {icon:"âš–ï¸",t:"General & Professional Liability",bul:["GL/Product liability","Professional liability","Environmental liability"]},
      {icon:"ğŸ—ï¸",t:"Construction",bul:["CAR/EAR","Contractorsâ€™ All Risks & Decennial","Site-wide coverage"]},
      {icon:"ğŸ©º",t:"Group Health & Benefits",bul:["Employeesâ€™ medical cover","Provider networks & TPAs","Custom plans by agreements"]}
    ],
    retail:[
      {icon:"ğŸ©º",t:"Health",bul:["In/out-patient care","Provider networks","Family options"]},
      {icon:"ğŸ›¡ï¸",t:"Personal Accident",bul:["Disability/loss of income","Family protection","24/7 assistance"]},
      {icon:"ğŸ ",t:"Home (Property)",bul:["Fire, theft, water damage","Personal liability","Valuables option"]},
      {icon:"ğŸ’¼",t:"Life Insurance & Savings",bul:["Wealth accumulation","Estate planning","Prudent allocation"]},
      {icon:"âœˆï¸",t:"Schengen Travel",bul:["Visa medical cover","Baggage & delay","Multi-trip option"]},
      {icon:"â³",t:"Retirement",bul:["Supplementary income","Tax-efficient (where applicable)","Managed profiles"]}
    ]
  },
  ar:{
    nav:{home:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",solutions:"Ø§Ù„Ø­Ù„ÙˆÙ„",re:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£Ù…ÙŠÙ†",esg:"Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©",contact:"Ø§ØªØµÙ„ Ø¨Ù†Ø§"},
    title:"Ø­Ù„ÙˆÙ„ Ø§Ù„ØªØ£Ù…ÙŠÙ†",
    subtitle:"Ø¹Ø±Ø¶ ÙˆØ§Ø¶Ø­ Ù„Ù€ <strong>Ø§Ù„Ø´Ø±ÙƒØ§Øª</strong> Ùˆ<strong>Ø§Ù„Ø£ÙØ±Ø§Ø¯</strong> â€” Ù…Ø³ØªÙ„Ù‡Ù… Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª.",
    badges:["Ù…Ù‚Ø§Ø±Ù†Ø© Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø´Ø±ÙƒØ§Øª","Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§Øª","Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø£ØªØ¹Ø§Ø¨"],
    tabs:{corp:"Ø§Ù„Ø´Ø±ÙƒØ§Øª",retail:"Ø§Ù„Ø£ÙØ±Ø§Ø¯"},
    clear:"Ù…Ø³Ø­",cta:"Ø§Ø·Ù„Ø¨ Ø¹Ø±Ø¶ Ø³Ø¹Ø±",
    footer:{desc:"ÙˆØ³Ø§Ø·Ø© ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ£Ù…ÙŠÙ† Ø¨ØªØ±Ø®ÙŠØµ ACAPS<br/>Ø§Ù„Ù…Ù‚Ø±: [Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„]<br/>Ø±Ù‚Ù… Ø§Ù„ØªØ±Ø®ÙŠØµ: [Ù„Ø§Ø­Ù‚Ø§Ù‹]",links:"Ø±ÙˆØ§Ø¨Ø·",contact:"Ø§ØªØµØ§Ù„"},
    corp:[
      {icon:"ğŸ­",t:"Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ù„Ù„Ø´Ø±ÙƒØ§Øª",bul:["Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ ÙˆØ§Ù„Ø¢Ù„Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†","ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø£Ø±Ø¨Ø§Ø­","Ø³Ø±Ù‚Ø© ÙˆÙƒØ³Ø± ÙˆØ²ÙŠØ§Ø¯Ø© Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±"]},
      {icon:"ğŸšš",t:"Ù†Ù‚Ù„ Ø§Ù„Ø¨Ø¶Ø§Ø¦Ø¹",bul:["Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ³Ø§Ø¦Ø·: Ø¨Ø±/Ø¨Ø­Ø±/Ø¬Ùˆ","Ø´Ø±ÙˆØ· ICC ÙˆØ§Ø®ØªÙŠØ§Ø±ÙŠØ§Øª","Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‚Ù„"]},
      {icon:"ğŸš—",t:"Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø§Ø·ÙŠÙ„",bul:["Ø£Ø³Ø§Ø·ÙŠÙ„ ÙˆÙ…Ø¹Ø¯Ø§Øª","Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© ÙˆØ£Ø¶Ø±Ø§Ø± ÙˆÙ…Ø³Ø§Ø¹Ø¯Ø§Øª","Ø­Ù…Ø§ÙŠØ© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©"]},
      {icon:"âš–ï¸",t:"Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©",bul:["Ø¹Ø§Ù…Ø©/Ù…Ù†ØªØ¬","Ù…Ù‡Ù†ÙŠØ©","Ø¨ÙŠØ¦ÙŠØ©"]},
      {icon:"ğŸ—ï¸",t:"Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡Ø§Øª",bul:["CAR/EAR","Ø¬Ù…ÙŠØ¹ Ø£Ø®Ø·Ø§Ø± Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„ÙŠÙ† & Ø§Ù„Ø¹Ø´Ø±ÙŠØ©","ØªØºØ·ÙŠØ© Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø¹Ù…Ù„"]},
      {icon:"ğŸ©º",t:"ØµØ­Ø© Ø¬Ù…Ø§Ø¹ÙŠØ© ÙˆÙ…Ø²Ø§ÙŠØ§",bul:["ØªØ£Ù…ÙŠÙ† Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø·Ø¨ÙŠ","Ø´Ø¨ÙƒØ§Øª Ù…Ø²ÙˆØ¯ÙŠÙ† & TPAs","Ø®Ø·Ø· Ù…Ø®ØµØµØ©"]}
    ],
    retail:[
      {icon:"ğŸ©º",t:"Ø§Ù„ØµØ­Ø©",bul:["Ø¹Ù„Ø§Ø¬ Ø¯Ø§Ø®Ù„/Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰","Ø´Ø¨ÙƒØ§Øª Ù…Ù‚Ø¯Ù‘Ù…ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©","Ø®ÙŠØ§Ø±Ø§Øª Ø¹Ø§Ø¦Ù„ÙŠØ©"]},
      {icon:"ğŸ›¡ï¸",t:"Ø­ÙˆØ§Ø¯Ø« Ø§Ù„Ø­ÙŠØ§Ø©",bul:["Ø¹Ø¬Ø²/ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¯Ø®Ù„","Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©","Ù…Ø³Ø§Ø¹Ø¯Ø© 24/7"]},
      {icon:"ğŸ ",t:"Ø§Ù„Ù…Ù…ØªÙ„ÙƒØ§Øª (Ø§Ù„Ù…Ù†Ø²Ù„)",bul:["Ø­Ø±ÙŠÙ‚ ÙˆØ³Ø±Ù‚Ø© ÙˆÙ…ÙŠØ§Ù‡","Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø´Ø®ØµÙŠØ©","Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ù‚ØªÙ†ÙŠØ§Øª"]},
      {icon:"ğŸ’¼",t:"ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø§Ø¯Ø®Ø§Ø±",bul:["ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ø¯Ø®Ø±Ø§Øª","Ø§Ù„ØªÙˆØ±ÙŠØ«","ØªÙˆØ²ÙŠØ¹ Ù…Ø­Ø§ÙØ¸ Ù…ØªØ²Ù†"]},
      {icon:"âœˆï¸",t:"Ø³ÙØ± Ø´Ù†ØºÙ†",bul:["ØªØºØ·ÙŠØ© ÙÙŠØ²Ø§ Ø·Ø¨ÙŠØ©","Ø£Ù…ØªØ¹Ø© ÙˆØªØ£Ø®Ù‘Ø±","Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø±Ø­Ù„Ø§Øª"]},
      {icon:"â³",t:"Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯",bul:["Ø¯Ø®Ù„ ØªÙƒÙ…ÙŠÙ„ÙŠ","ÙƒÙØ§Ø¡Ø© Ø¶Ø±ÙŠØ¨ÙŠØ© (Ø­ÙŠØ« ØªÙ†Ø·Ø¨Ù‚)","Ù…Ù„ÙØ§Øª Ø¥Ø¯Ø§Ø±Ø©"}]
  }
};

let lang = localStorage.getItem('riskalia_lang')||'fr';
if(!['fr','en','ar'].includes(lang)) lang='fr';
const $ = (s,root=document)=>root.querySelector(s);
const $$ = (s,root=document)=>[...root.querySelectorAll(s)];

function t(path){const ns=path.split('.');let cur=I18N[lang];for(const n of ns){if(cur==null||!(n in cur)) return path;cur=cur[n]}return cur;}

function setActiveNav(){
  $$('#menu a').forEach(a=>a.classList.toggle('active', a.getAttribute('href').endsWith('solutions.html')));
}

function productCard(p){
  return `<article class="card">
    <div class="kicker">${p.icon}</div>
    <h3>${p.t}</h3>
    <ul>${(p.bul||[]).map(x=>`<li>${x}</li>`).join('')}</ul>
    <div style="margin-top:10px"><a class="btn secondary" href="contact.html">${lang==='en'?'Learn more':lang==='ar'?'Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª':'En savoir plus'}</a></div>
  </article>`;
}

function renderPanel(type='corp'){
  const data = t(type);
  const host = $('#panel');
  host.innerHTML = `<div class="grid" id="grid"></div>`;
  $('#grid').innerHTML = data.map(productCard).join('');
}

function applyTexts(){
  document.documentElement.lang=lang; document.body.dir=(lang==='ar'?'rtl':'ltr');
  $$('[data-i18n]').forEach(el=> el.innerHTML=t(el.dataset.i18n));
  $$('.lang-btn').forEach(b=> b.classList.toggle('active', b.dataset.lang===lang));
  setActiveNav();
  renderPanel(currentTab);
}

let currentTab='corp';

function initUI(){
  // burger
  const toggle=$('.menu-toggle'), menu=$('#menu');
  if(toggle&&menu){ toggle.addEventListener('click',()=>menu.classList.toggle('show')); }

  // tabs
  $$('.tab').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      $$('.tab').forEach(x=>x.classList.remove('active'));
      btn.classList.add('active');
      currentTab = btn.dataset.tab;
      renderPanel(currentTab);
      $('#q').value=''; // reset search
    });
  });

  // search filter
  const q=$('#q'); const clear=$('#clear');
  const filter=()=>{
    const kw=q.value.trim().toLowerCase();
    const items=[...(t(currentTab)||[])];
    const filtered = kw? items.filter(p=> (p.t+' '+(p.bul||[]).join(' ')).toLowerCase().includes(kw)) : items;
    $('#grid').innerHTML = filtered.map(productCard).join('');
  };
  q.addEventListener('input', filter);
  clear.addEventListener('click', ()=>{ q.value=''; filter(); q.focus(); });

  // language switch
  $$('.lang-btn').forEach(btn=> btn.addEventListener('click', ()=>{ lang=btn.dataset.lang; localStorage.setItem('riskalia_lang',lang); applyTexts(); }));

  // reveal
  const rev=$$('.reveal'); const onScroll=()=>{ const tr=window.innerHeight*0.85; rev.forEach(el=>{ if(el.getBoundingClientRect().top<tr) el.classList.add('active'); }); };
  window.addEventListener('scroll',onScroll); onScroll();
}

document.addEventListener('DOMContentLoaded', ()=>{ applyTexts(); initUI(); });
</script>
</body>
</html>
